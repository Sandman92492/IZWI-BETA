/* iZwi Unified Design System (CDN Tailwind compatible) */

/* Color tokens */
:root {
  --color-primary: #2A9D8F;
  --color-primary-600: #1f7a6f;
  --color-primary-100: #e0f2f1;
  --color-bg: #f7f9f9;
  --color-surface: #ffffff;
  --color-text: #000000;
  --color-muted: #7b8b97;
  --color-border: #edf1f2;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --shadow-soft: 0 4px 12px rgba(0,0,0,0.05), 0 1px 4px rgba(0,0,0,0.04);
  --shadow-medium: 0 8px 24px rgba(0,0,0,0.08), 0 2px 8px rgba(0,0,0,0.06);
  --shadow-large: 0 16px 48px rgba(0,0,0,0.12), 0 4px 16px rgba(0,0,0,0.08);
}

.dark {
  --color-bg: #142522;
  --color-surface: #213533;
  --color-text: #d7ebe9;
  --color-muted: #a7bbb9;
  --color-border: #334b48;
}

/* Base typography rhythm */
html, body { color: var(--color-text); background: var(--color-bg); }
body { font-synthesis-weight: none; text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased; line-height: 1.6; }

h1, h2, h3, h4, h5, h6 {
  letter-spacing: -0.01em;
  line-height: 1.3;
  margin-bottom: 0.5rem;
}
h1 { font-weight: 800; }
h2 { font-weight: 700; }
h3 { font-weight: 600; }
h4 { font-weight: 600; }

p { margin-bottom: 1rem; line-height: 1.6; }

/* Components */
.card { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius-lg); box-shadow: var(--shadow-soft); }
.surface { background: var(--color-surface); border-radius: var(--radius-md); border: 1px solid var(--color-border); }

.btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; height: 44px; padding: 0 16px; border-radius: var(--radius-md); font-weight: 600; transition: background-color .2s ease, box-shadow .2s ease, transform .02s ease; }
.btn:active { transform: translateY(0.5px); }
.btn-primary { background: var(--color-primary); color: #ffffff; }
.btn-primary:hover { background: var(--color-primary-600); }
.btn-ghost { background: transparent; color: var(--color-text); border: 1px solid var(--color-border); }
.btn-ghost:hover { background: rgba(0,0,0,0.03); }

.input {
  width: 100%;
  height: 44px;
  padding: 0 14px;
  border-radius: var(--radius-md);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text) !important;
  -webkit-text-fill-color: var(--color-text) !important;
  appearance: none;
  -webkit-appearance: none;
}
.input::placeholder { color: var(--color-muted); }
.input:focus {
  color: var(--color-text) !important;
  -webkit-text-fill-color: var(--color-text) !important;
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(42, 157, 143, 0.1);
  transition: all 0.2s ease;
}

.dark .input {
  color: var(--color-text) !important;
  -webkit-text-fill-color: var(--color-text) !important;
}
.dark .input:focus {
  color: var(--color-text) !important;
  -webkit-text-fill-color: var(--color-text) !important;
}

.chip { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 9999px; background: rgba(25, 179, 161, 0.1); color: var(--color-primary); font-weight: 600; }

.shadow-soft { box-shadow: var(--shadow-soft); }


/* Toast container spacing helper (when multiple toasts) */
#flash-container .alert-message { backdrop-filter: saturate(1.05) blur(0.25px); }

/* Enhanced animations and transitions */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes scaleIn {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.05); }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.4s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out;
}

.animate-pulse {
  animation: pulse 2s infinite;
}

/* Enhanced button styles */
.btn {
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

.btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s;
}

.btn:hover::before {
  left: 100%;
}

/* Override browser autofill styles that might interfere with text visibility */
.input:-webkit-autofill,
.input:-webkit-autofill:hover,
.input:-webkit-autofill:focus,
.input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px var(--color-surface) inset !important;
  -webkit-text-fill-color: #000000 !important;
  color: #000000 !important;
  border: 1px solid var(--color-border) !important;
}

/* Force text color on all input types and states */
input[type="text"], input[type="email"], input[type="password"] {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

input[type="text"]:focus, input[type="email"]:focus, input[type="password"]:focus {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

/* Ensure text is always visible during typing */
.input:not(:placeholder-shown) {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

.dark .input:not(:placeholder-shown) {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

.dark .input:-webkit-autofill,
.dark .input:-webkit-autofill:hover,
.dark .input:-webkit-autofill:focus,
.dark .input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px var(--color-surface) inset !important;
  -webkit-text-fill-color: #000000 !important;
  color: #000000 !important;
  border: 1px solid var(--color-border) !important;
}

/* Card hover effects */
.card {
  transition: all 0.3s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-medium);
}

/* Loading states */
.loading-shimmer {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Success states */
.success-checkmark {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: inline-block;
  stroke-width: 2;
  stroke: #10b981;
  stroke-miterlimit: 10;
  margin: 10% auto;
  box-shadow: inset 0px 0px 0px #10b981;
  animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
}

@keyframes fill {
  100% {
    box-shadow: inset 0px 0px 0px 30px #10b981;
  }
}

@keyframes scale {
  0%, 100% {
    transform: none;
  }
  50% {
    transform: scale3d(1.1, 1.1, 1);
  }
}

/* Progress indicators */
.progress-ring {
  transition: stroke-dasharray 0.35s;
  transform: rotate(-90deg);
  transform-origin: 50% 50%;
}

/* Enhanced shadows for depth */
.shadow-primary {
  box-shadow: 0 4px 20px rgba(42, 157, 143, 0.15);
}

.shadow-primary-lg {
  box-shadow: 0 8px 32px rgba(42, 157, 143, 0.2);
}

/* Mobile dashboard layout stability */
@media (max-width: 1023px) {
  /* Force viewport height constraint on dashboard page - keep for layout stability */
  body:has(.dashboard-main) {
    min-height: 100vh !important;
    max-height: 100vh !important;
    height: 100vh !important;
    overflow: hidden !important; /* Restore to prevent body scroll - only alerts container should scroll */
  }

  /* Prevent main scroll on dashboard - only alerts container should scroll */
  .dashboard-main {
    min-height: 100vh;
    flex: 1;
    overflow: hidden; /* Prevent main scroll */
  }

  /* Prevent section scroll on mobile dashboard */
  .dashboard-main section {
    overflow: hidden;
  }

  /* main overflow removed to allow alerts container scrolling */

  /* Prevent alerts column from shifting vertically */
  .lg\\:col-span-5 {
    transform: translateZ(0);
    will-change: auto;
  }

  /* Map container layout stability */
  .map-container {
    position: relative;
    z-index: 1; /* Ensure map stays behind other UI elements */
  }

  /* Ensure proper scrolling behavior with containment */
  #alerts-container-wrapper {
    contain: layout; /* Prevent layout shifts from affecting parent */
  }

  #alerts-container {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overflow-anchor: auto; /* Enable scroll anchoring to prevent jumping */
  }

  /* Height-based map shrinking with containment to prevent jumping */
  @media (max-width: 767px) {
    .dashboard-map {
      transition: height 0.3s ease-in-out;
      will-change: height; /* GPU hint for better performance */
      contain: layout style; /* Isolate layout changes to prevent jumping */
    }

    .dashboard-map.map-shrunk {
      height: 20vh !important;
    }
  }

  /* Mobile menu z-index management and animations */
  #mobile-menu {
    z-index: 40; /* Above map but below post button */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  #mobile-menu .bg-white,
  #mobile-menu .bg-gray-800 {
    box-shadow: -10px 0 30px rgba(0, 0, 0, 0.15);
  }

  /* Post alert button z-index */
  .post-alert-btn {
    z-index: 50; /* Highest priority UI element */
  }

  /* Hamburger animation refinements */
  #hamburger-line-1.rotate-45 {
    transform: rotate(45deg) translate(6px, 6px);
  }

  #hamburger-line-2.opacity-0 {
    opacity: 0;
    transform: scale(0);
  }

  #hamburger-line-3.-rotate-45 {
    transform: rotate(-45deg) translate(6px, -6px);
  }

  /* Menu item hover effects */
  #mobile-menu a {
    position: relative;
    overflow: hidden;
  }

  #mobile-menu a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(42, 157, 143, 0.1), transparent);
    transition: left 0.4s ease;
  }

  #mobile-menu a:hover::before {
    left: 100%;
  }
}


